<!DOCTYPE html>
<html>
<head>
    <title>Généalogie Web</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f5f6f5; }
        h1 { color: #005670; }
        .form-container { background-color: white; padding: 20px; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 20px; }
        input, button, select { padding: 8px; margin: 5px 0; }
        button { background-color: #005670; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background-color: #003d4f; }
        .personne { background-color: white; padding: 10px; margin: 10px 0; border-radius: 5px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .decede { text-decoration: line-through; color: #d9534f; }
        a { color: #005670; text-decoration: none; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <h1>Mon Arbre Généalogique</h1>
    <p><a href="/arbre">Voir l’arbre généalogique</a></p>
    <div class="form-container">
        <form action="/" method="post">
            <input type="text" name="prenom" placeholder="Prénom" required>
            <input type="text" name="nom" placeholder="Nom" required>
            <input type="text" name="date_naissance" placeholder="YYYY-MM-DD" required>
            <select name="parent1_id">
                <option value="">Aucun parent 1</option>
                {% for personne in personnes %}
                    <option value="{{ personne.id }}">{{ personne.prenom }} {{ personne.nom }} ({{ personne.date_naissance }})</option>
                {% endfor %}
            </select>
            <select name="parent2_id">
                <option value="">Aucun parent 2</option>
                {% for personne in personnes %}
                    <option value="{{ personne.id }}">{{ personne.prenom }} {{ personne.nom }} ({{ personne.date_naissance }})</option>
                {% endfor %}
            </select>
            <button type="submit">Ajouter</button>
        </form>
    </div>
    <h2>Personnes</h2>
    {% for personne in personnes %}
        <div class="personne {% if personne.est_decede is sameas true %}decede{% endif %}">
            {{ personne.prenom }} {{ personne.nom }} ({{ personne.date_naissance }}) - Décédé : {{ personne.est_decede }}
            {% if personne.parent1 %} - Parent 1: {{ personne.parent1.prenom }} {{ personne.parent1.nom }} {% endif %}
            {% if personne.parent2 %} - Parent 2: {{ personne.parent2.prenom }} {{ personne.parent2.nom }} {% endif %}
            {% if personne.est_decede is sameas false %}
                <a href="/decede/{{ personne.id }}">Marquer comme décédé</a> |
            {% endif %}
            <a href="/edit/{{ personne.id }}">Modifier</a> |
            <a href="/supprimer/{{ personne.id }}" onclick="return confirm('Voulez-vous vraiment supprimer {{ personne.prenom }} {{ personne.nom }} ?');">Supprimer</a>
        </div>
    {% endfor %}
</body>
</html>
